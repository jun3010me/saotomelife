---
title: アクセスリストで偶数や奇数を制限しよう
author: 魚住 惇
type: post
date: 2008-02-28T01:56:43+00:00
url: /ccna-accesslist-gusu-kisu-50.html
thumbnail: /wp-content/uploads/2016/06/saotomelogos.jpg
has_been_twittered:
  - failed
twitter_failure_code:
  - 400
twitter_failure_reason:
  - Settings do not permit the auto-tweeting of old posts
views:
  - 14
scc_follow_count_feedly:
  - 37
categories:
  - PC
tags:
  - CCNAのメモ
  - アクセスリスト

---
アクセスリストは、こういった活用方法もできるんです。

<!--more-->

192.168.1.0ネットワークにアクセスリストを制限しようとします。

ネットワークを拒否する時は、

Router(config)#access-list 1 deny 192.168.1.0 0.0.0.255

でしたね？

こうすると、192.168.10.0/24を拒否するリストができます。

ネットワークアドレスの後は、ワイルドカードマスクを使用するわけです。

なので、255.255.255.0の逆で、0.0.0.255です。

しかし、ワイルドカードマスクは、ネットワークを指定するわけじゃなくて、

条件として使われるものです。

つまり、ワイルドカードマスクの本当の意味で考えると、

192.168.1.0 0.0.0.255なので、「0」の部分が固定なわけです。

ワイルドカードマスクの数字のある部分が自由だから、

192.168.1.0?255までの数字が条件で指定した範囲となるわけです。

これを、2進数で表現すると、こうなります。

**11000000.10101000.00000001.00000000←IPアドレス 00000000.00000000.00000000.11111111←ワイルドカードマスク**

これを見ると、3オクテット目まで固定だから、/24と同じ動きになるんですねぇ。

では、応用として、奇数のアドレスだけ拒否するアクセスリストを作りましょう。

2進数で表すと、とてもわかりやすいです。

IPアドレスが奇数の場合、例えば11や193などは、こうなりますよね。

00001011:11 11000001:193

そう、ここでの鍵は、最後の1桁が「1」だっていうことです。

2進数の1桁は、1と0ですから、ここを制限すればいいわけです。

それじゃぁ、実際に奇数のアドレスを制限してみましょう。

11000000.10101000.00000001.0000000**1**←IPアドレス 00000000.00000000.00000000.1111111****←ワイルドカードマスク

IPアドレスの最後の部分を「1」と指定して、 ワイルドカードマスクの最後の部分を「0」にします。 そうすると、4オクテット目の最後の部分だけを固定して、 ワイルドカードマスクから外すわけです。

これを10進数に変換すると、こうなります。

192.168.1.1 0.0.0.254

つまり、コマンドで表すと、

Router(config)#access-list 1 deny 192.168.1.1 0.0.0.254

となるわけです。

こんな活用方法もあるわけですね。

偶数、奇数に関わらず、他にも色々とできるますね。